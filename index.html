<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pediatric Nursing Flashcards - Chapter 24: Renal Dysfunction</title>
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', 'Arial', sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #e3f2fd 0%, #bbdefb 100%);
            min-height: 100vh;
            padding: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
        }
        
        .container {
            width: 100%;
            max-width: 1200px;
            height: 96vh;
            background: #f5f9ff;
            border-radius: 20px;
            box-shadow: 0 15px 40px rgba(33, 150, 243, 0.2);
            overflow: hidden;
            display: flex;
            flex-direction: column;
            border: 3px solid #2196F3;
        }
        
        .header {
            background: linear-gradient(135deg, #2196F3, #0D47A1);
            color: #e3f2fd;
            padding: 12px 15px;
            text-align: center;
            position: relative;
            overflow: hidden;
            flex-shrink: 0;
        }
        
        .header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" width="100" height="100" opacity="0.1"><path d="M30,20 Q50,10 70,20 Q85,35 80,60 Q75,85 50,90 Q25,85 20,60 Q15,35 30,20 Z" fill="white"/><circle cx="40" cy="40" r="8" fill="white"/><circle cx="60" cy="40" r="8" fill="white"/><path d="M35,55 L45,65 M55,55 L65,65" stroke="white" stroke-width="3"/></svg>');
            background-size: 80px 80px;
        }
        
        .header h1 {
            font-size: 1.5rem;
            margin-bottom: 4px;
            position: relative;
            color: #e3f2fd;
            line-height: 1.2;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.2);
        }
        
        .header .subtitle {
            font-size: 0.9rem;
            opacity: 0.95;
            position: relative;
            color: #bbdefb;
            margin-bottom: 8px;
            font-weight: 500;
        }
        
        .progress {
            background: #2196F3;
            height: 6px;
            width: 100%;
            flex-shrink: 0;
            border-radius: 0 0 5px 5px;
        }
        
        .progress-bar {
            background: linear-gradient(90deg, #64B5F6, #2196F3);
            height: 100%;
            width: 0%;
            transition: width 0.4s ease;
            border-radius: 0 5px 5px 0;
        }
        
        .section-nav {
            display: flex;
            gap: 6px;
            padding: 8px 10px;
            background: linear-gradient(135deg, #1976D2, #2196F3);
            border-bottom: 1px solid #90CAF9;
            flex-shrink: 0;
            overflow-x: auto;
            align-items: center;
            justify-content: center;
        }
        
        .section-btn {
            padding: 5px 10px;
            border: 2px solid #90CAF9;
            background: rgba(255, 255, 255, 0.95);
            color: #1976D2;
            border-radius: 15px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
            font-size: 0.75rem;
            white-space: nowrap;
            flex-shrink: 0;
            min-width: 120px;
            text-align: center;
        }
        
        .section-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(33, 150, 243, 0.4);
        }
        
        .section-btn.active {
            background: linear-gradient(135deg, #BBDEFB, #90CAF9);
            color: #0D47A1;
            border-color: #1976D2;
            box-shadow: 0 6px 12px rgba(33, 150, 243, 0.5);
        }
        
        .flashcard {
            padding: 12px;
            flex: 1;
            display: flex;
            flex-direction: column;
            background: #f5f9ff;
            overflow: hidden;
            min-height: 0;
        }
        
        .question-container {
            display: flex;
            gap: 10px;
            align-items: flex-start;
            margin-bottom: 8px;
            background: white;
            padding: 12px;
            border-radius: 10px;
            border-left: 6px solid #90CAF9;
            box-shadow: 0 4px 8px rgba(33, 150, 243, 0.1);
            flex-shrink: 0;
        }
        
        .question-icon {
            background: linear-gradient(135deg, #1976D2, #2196F3);
            color: white;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1rem;
            font-weight: bold;
            flex-shrink: 0;
            box-shadow: 0 4px 8px rgba(25, 118, 210, 0.4);
        }
        
        .question {
            font-size: 0.9rem;
            line-height: 1.4;
            color: #1565C0;
            flex-grow: 1;
            font-weight: 500;
            overflow-wrap: break-word;
            hyphens: auto;
        }
        
        .multiple-select-indicator {
            background: #2196F3;
            color: white;
            padding: 3px 8px;
            border-radius: 15px;
            font-size: 0.7rem;
            font-weight: bold;
            margin-left: 6px;
            white-space: nowrap;
            box-shadow: 0 3px 6px rgba(33, 150, 243, 0.3);
            flex-shrink: 0;
        }
        
        .options {
            display: flex;
            flex-direction: column;
            gap: 6px;
            margin-bottom: 8px;
            flex: 1;
            overflow: hidden;
            min-height: 0;
        }
        
        .option {
            padding: 8px 10px;
            border: 2px solid #BBDEFB;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            background: white;
            display: flex;
            align-items: flex-start;
            gap: 10px;
            font-size: 0.85rem;
            line-height: 1.3;
            flex-shrink: 0;
            min-height: 45px;
        }
        
        .option:hover {
            background: #e3f2fd;
            border-color: #90CAF9;
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(144, 202, 249, 0.2);
        }
        
        .option-letter {
            background: #BBDEFB;
            color: #1976D2;
            width: 25px;
            height: 25px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            flex-shrink: 0;
            transition: all 0.3s ease;
            font-size: 0.8rem;
            border: 2px solid #90CAF9;
        }
        
        /* CORRECT - ALWAYS BLUE */
        .option.correct {
            background: #d1ecf1;
            border-color: #17a2b8;
            color: #0c5460;
        }
        
        .option.correct .option-letter {
            background: #17a2b8;
            color: white;
            border-color: #17a2b8;
        }
        
        /* INCORRECT - ALWAYS RED */
        .option.incorrect {
            background: #f8d7da;
            border-color: #dc3545;
            color: #721c24;
        }
        
        .option.incorrect .option-letter {
            background: #dc3545;
            color: white;
            border-color: #dc3545;
        }
        
        .option.selected {
            background: #e3f2fd;
            border-color: #90CAF9;
            color: #1976D2;
        }
        
        .option.selected .option-letter {
            background: #90CAF9;
            color: #1976D2;
            border-color: #2196F3;
        }
        
        .feedback {
            padding: 8px 10px;
            border-radius: 8px;
            margin-bottom: 8px;
            display: none;
            align-items: center;
            gap: 8px;
            font-weight: 600;
            font-size: 0.85rem;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
            flex-shrink: 0;
        }
        
        .feedback.correct {
            background: #d1ecf1;
            border: 3px solid #17a2b8;
            color: #0c5460;
            display: flex;
        }
        
        .feedback.incorrect {
            background: #f8d7da;
            border: 3px solid #dc3545;
            color: #721c24;
            display: flex;
        }
        
        .feedback-icon {
            font-size: 1.2rem;
            flex-shrink: 0;
        }
        
        .navigation {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px 12px;
            background: #BBDEFB;
            border-top: 2px solid #90CAF9;
            flex-shrink: 0;
            gap: 8px;
        }
        
        .counter {
            font-weight: bold;
            color: #1976D2;
            font-size: 0.9rem;
            background: white;
            padding: 5px 10px;
            border-radius: 20px;
            border: 2px solid #90CAF9;
            box-shadow: 0 3px 6px rgba(0,0,0,0.1);
            flex-shrink: 0;
        }
        
        .btn {
            padding: 8px 12px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 6px;
            font-size: 0.8rem;
            white-space: nowrap;
            box-shadow: 0 4px 8px rgba(0,0,0,0.15);
        }
        
        .btn-primary {
            background: linear-gradient(135deg, #1976D2, #2196F3);
            color: white;
        }
        
        .btn-primary:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 16px rgba(25, 118, 210, 0.4);
        }
        
        .btn-secondary {
            background: linear-gradient(135deg, #2196F3, #1976D2);
            color: white;
        }
        
        .btn-secondary:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 16px rgba(33, 150, 243, 0.4);
        }
        
        .btn-warning {
            background: linear-gradient(135deg, #FFC107, #FF9800);
            color: #212529;
        }
        
        .btn-warning:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 16px rgba(255, 193, 7, 0.4);
        }
        
        .btn-danger {
            background: linear-gradient(135deg, #F44336, #D32F2F);
            color: white;
        }
        
        .btn-danger:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 16px rgba(244, 67, 54, 0.4);
        }
        
        .rationale {
            background: linear-gradient(135deg, #FFF3CD, #FFEEAA);
            border: 3px solid #FFC107;
            border-radius: 10px;
            padding: 10px;
            margin-top: 8px;
            display: none;
            box-shadow: 0 4px 12px rgba(255, 193, 7, 0.2);
            flex-shrink: 0;
            overflow: hidden;
            max-height: 120px;
        }
        
        .rationale.show {
            display: block;
            animation: slideIn 0.5s ease;
        }
        
        .rationale h4 {
            color: #FF9800;
            margin-bottom: 6px;
            display: flex;
            align-items: center;
            gap: 6px;
            font-size: 0.9rem;
        }
        
        .rationale p {
            color: #856404;
            line-height: 1.4;
            font-size: 0.8rem;
        }
        
        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .stats {
            display: flex;
            gap: 6px;
            justify-content: center;
            margin-top: 4px;
            flex-wrap: wrap;
            flex-shrink: 0;
        }
        
        .stat {
            background: rgba(255, 255, 255, 0.2);
            padding: 4px 8px;
            border-radius: 15px;
            font-size: 0.7rem;
            white-space: nowrap;
            border: 1px solid rgba(255, 255, 255, 0.3);
        }
        
        .cancel-selection {
            background: linear-gradient(135deg, #F44336, #D32F2F);
            color: white;
            margin: 0 auto 8px auto;
            display: none;
            box-shadow: 0 4px 10px rgba(244, 67, 54, 0.3);
            flex-shrink: 0;
        }
        
        .cancel-selection:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 16px rgba(244, 67, 54, 0.4);
        }
        
        .cancel-selection.show {
            display: flex;
        }
        
        .multiple-select-instructions {
            text-align: center;
            color: #1976D2;
            font-weight: 600;
            margin-bottom: 8px;
            font-size: 0.8rem;
            background: #FFF3CD;
            padding: 6px;
            border-radius: 8px;
            border: 2px solid #FFEEAA;
            flex-shrink: 0;
        }
        
        .matching-container {
            background: linear-gradient(135deg, #f5f9ff, #e3f2fd);
            border-radius: 8px;
            padding: 10px;
            border: 2px solid #BBDEFB;
            flex: 1;
            display: flex;
            flex-direction: column;
            overflow: hidden;
            min-height: 0;
        }
        
        .matching-question {
            font-size: 0.85rem;
            color: #1565C0;
            font-weight: 500;
            margin-bottom: 10px;
            padding: 8px;
            background: white;
            border-radius: 8px;
            border: 2px solid #BBDEFB;
            overflow: hidden;
            text-overflow: ellipsis;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            max-height: 3em;
            flex-shrink: 0;
        }
        
        .matching-options {
            flex: 1;
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
            gap: 5px;
            overflow: hidden;
            padding: 2px;
            min-height: 0;
        }
        
        .matching-option {
            padding: 8px;
            border: 2px dashed #90CAF9;
            border-radius: 6px;
            cursor: pointer;
            text-align: center;
            transition: all 0.3s ease;
            font-size: 0.8rem;
            font-weight: 500;
            color: #2196F3;
            background: white;
            display: flex;
            align-items: center;
            justify-content: center;
            min-height: 40px;
            overflow: hidden;
            line-height: 1.2;
        }
        
        .matching-option:hover {
            background: #e3f2fd;
            border-style: solid;
            border-color: #90CAF9;
        }
        
        .matching-option.correct {
            background: linear-gradient(135deg, #d1ecf1, #bee5eb);
            border-color: #17a2b8;
            border-style: solid;
            color: #0c5460;
        }
        
        .matching-option.incorrect {
            background: linear-gradient(135deg, #f8d7da, #f5c6cb);
            border-color: #dc3545;
            border-style: solid;
            color: #721c24;
        }
        
        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none !important;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1) !important;
        }
        
        /* Remove all scrollbars */
        .options,
        .matching-options,
        .rationale,
        .container,
        .flashcard,
        body {
            overflow: hidden !important;
            -ms-overflow-style: none !important;
            scrollbar-width: none !important;
        }
        
        .options::-webkit-scrollbar,
        .matching-options::-webkit-scrollbar,
        .rationale::-webkit-scrollbar {
            display: none !important;
            width: 0 !important;
            height: 0 !important;
        }
        
        @media (max-width: 768px) {
            .container {
                height: 98vh;
            }
            
            .section-btn {
                min-width: 100px;
                font-size: 0.7rem;
                padding: 4px 8px;
            }
            
            .matching-options {
                grid-template-columns: 1fr;
            }
            
            .header {
                padding: 10px 12px;
            }
            
            .header h1 {
                font-size: 1.2rem;
            }
            
            .navigation {
                padding: 8px 10px;
                flex-wrap: wrap;
                justify-content: center;
                gap: 6px;
            }
            
            .counter {
                order: -1;
                width: 100%;
                text-align: center;
                margin-bottom: 4px;
                font-size: 0.8rem;
            }
            
            .btn {
                padding: 6px 10px;
                font-size: 0.75rem;
            }
            
            .question {
                font-size: 0.85rem;
            }
            
            .option {
                font-size: 0.8rem;
                padding: 6px 8px;
                min-height: 40px;
            }
            
            .question-icon {
                width: 35px;
                height: 35px;
                font-size: 0.9rem;
            }
            
            .option-letter {
                width: 22px;
                height: 22px;
                font-size: 0.75rem;
            }
        }
        
        @media (max-height: 700px) {
            .container {
                height: 99vh;
            }
            
            .header {
                padding: 8px 10px;
            }
            
            .header h1 {
                font-size: 1.1rem;
            }
            
            .header .subtitle {
                font-size: 0.8rem;
            }
            
            .question-container {
                padding: 10px;
                margin-bottom: 6px;
            }
            
            .question {
                font-size: 0.8rem;
                line-height: 1.3;
            }
            
            .option {
                padding: 6px 8px;
                min-height: 35px;
                font-size: 0.75rem;
            }
            
            .navigation {
                padding: 6px 8px;
            }
            
            .rationale {
                max-height: 80px;
                padding: 8px;
            }
            
            .feedback {
                padding: 6px 8px;
                font-size: 0.75rem;
            }
            
            .option-letter {
                width: 20px;
                height: 20px;
                font-size: 0.7rem;
            }
            
            .stats {
                display: none;
            }
        }
        
        @media (max-height: 600px) {
            .question-container {
                padding: 8px;
            }
            
            .question-icon {
                width: 30px;
                height: 30px;
                font-size: 0.8rem;
            }
            
            .option {
                min-height: 30px;
                padding: 4px 6px;
                font-size: 0.7rem;
            }
            
            .option-letter {
                width: 18px;
                height: 18px;
                font-size: 0.65rem;
            }
            
            .btn {
                padding: 5px 8px;
                font-size: 0.7rem;
            }
            
            .rationale {
                max-height: 60px;
                padding: 6px;
            }
            
            .rationale p {
                font-size: 0.7rem;
                line-height: 1.3;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üíß Chapter 24: The Child with Renal Dysfunction</h1>
            <div class="subtitle">Renal Disorders & Urinary Tract Health - Kidney & Filter Theme</div>
            <div class="stats">
                <div class="stat">üìö 45 MC Questions</div>
                <div class="stat">üíß Renal Disorders</div>
                <div class="stat">ü©∫ Urinary Health</div>
                <div class="stat">üíä Medication Calculations</div>
            </div>
        </div>
        <div class="progress">
            <div class="progress-bar" id="progressBar"></div>
        </div>
        
        <div class="section-nav">
            <button class="section-btn active" onclick="setSection('multiple-choice')">Multiple Choice (45)</button>
            <button class="section-btn" onclick="setSection('matching')">UTI Definitions (5)</button>
            <button class="section-btn" onclick="setSection('med-math')">Med Math (5)</button>
            <button class="section-btn" onclick="setSection('all')">All Mixed (55)</button>
        </div>
        
        <div class="flashcard">
            <div class="question-container">
                <div class="question-icon" id="questionNumber">1</div>
                <div class="question" id="question"></div>
                <div class="multiple-select-indicator" id="multipleSelectIndicator" style="display: none;">Multiple Answers</div>
            </div>
            
            <div class="multiple-select-instructions" id="multipleSelectInstructions" style="display: none;">
                üí° Select ALL correct answers
            </div>
            
            <div class="options" id="options"></div>
            
            <div class="matching-container" id="matchingContainer" style="display: none;">
                <div class="matching-question" id="matchingQuestion"></div>
                <div class="matching-options" id="matchingOptions"></div>
            </div>
            
            <button class="btn cancel-selection" id="cancelBtn" onclick="cancelSelection()">
                üîÑ Reset
            </button>
            
            <div class="feedback" id="feedback">
                <div class="feedback-icon" id="feedbackIcon"></div>
                <div id="feedbackText"></div>
            </div>
            <div class="rationale" id="rationale">
                <h4>üí° Rationale:</h4>
                <p id="rationaleText"></p>
            </div>
        </div>
        
        <div class="navigation">
            <button class="btn btn-secondary" id="prevBtn" onclick="previousCard()">
                ‚¨ÖÔ∏è Prev
            </button>
            <div class="counter" id="counter">1/45</div>
            <button class="btn btn-warning" id="submitBtn" onclick="submitAnswer()" style="display: none;">
                ‚úÖ Submit
            </button>
            <button class="btn btn-primary" id="nextBtn" onclick="nextCard()">
                Next ‚û°Ô∏è
            </button>
        </div>
    </div>

    <script>
        // Chapter 24 Data - The Child with Renal Dysfunction
        const sections = {
            'multiple-choice': [
                {
                    question: "Urinary tract anomalies are frequently associated with what irregularities in fetal development?",
                    options: ["Myelomeningocele", "Cardiovascular anomalies", "Malformed or low-set ears", "Defects in lower extremities"],
                    correct: 2,
                    rationale: "Although unexplained, there is a frequent association between malformed or low-set ears and urinary tract anomalies. During the newborn examination, the nurse should have a high suspicion about urinary tract structure and function if ear anomalies are present."
                },
                {
                    question: "What urine test result is considered abnormal?",
                    options: ["pH 4.0", "WBC 1 or 2 cells/ml", "Protein level absent", "Specific gravity 1.020"],
                    correct: 0,
                    rationale: "The expected pH ranges from 4.8 to 7.8. A pH of 4.0 can be indicative of urinary tract infection or metabolic alkalosis or acidosis. Less than 1 or 2 white blood cells per milliliter is the expected range. The absence of protein is expected. A specific gravity of 1.020 is within the anticipated range of 1.001 to 1.030."
                },
                {
                    question: "What diagnostic test allows visualization of renal parenchyma and renal pelvis without exposure to external-beam radiation or radioactive isotopes?",
                    options: ["Renal ultrasonography", "Computed tomography", "Intravenous pyelography", "Voiding cystourethrography"],
                    correct: 0,
                    rationale: "The transmission of ultrasonic waves through the renal parenchyma allows visualization without exposure to external-beam radiation or radioactive isotopes. Other options use radiation and contrast media."
                },
                {
                    question: "What name is given to inflammation of the bladder?",
                    options: ["Cystitis", "Urethritis", "Urosepsis", "Bacteriuria"],
                    correct: 0,
                    rationale: "Cystitis is inflammation of the bladder. Urethritis is inflammation of the urethra. Urosepsis is a febrile UTI with systemic signs. Bacteriuria is the presence of bacteria in urine."
                },
                {
                    question: "The nurse is teaching a client to prevent future urinary tract infections (UTIs). What factor is most important to emphasize as the potential cause?",
                    options: ["Poor hygiene", "Constipation", "Urinary stasis", "Congenital anomalies"],
                    correct: 2,
                    rationale: "Urinary stasis is the single most important host factor that influences UTI development. Urine provides an excellent growth medium for bacteria at body temperature."
                },
                {
                    question: "A girl, age 5¬Ω years, has been sent to the school nurse for urinary incontinence three times in the past 2 days. The nurse should recommend to her parent that the first action is to have the child evaluated for what condition?",
                    options: ["School phobia", "Glomerulonephritis", "Urinary tract infection (UTI)", "Attention deficit hyperactivity disorder (ADHD)"],
                    correct: 2,
                    rationale: "Girls between ages 2 and 6 years are considered high risk for UTIs. This child shows signs of UTI including incontinence in a toilet-trained child. A physiologic cause should be ruled out before psychosocial factors."
                },
                {
                    question: "What recommendation should the nurse make to prevent urinary tract infections (UTIs) in young girls?",
                    options: ["Avoid public toilet facilities", "Limit long baths as much as possible", "Cleanse the perineum with water after voiding", "Ensure clear liquid intake of 2 L/day"],
                    correct: 3,
                    rationale: "Adequate fluid intake minimizes urinary stasis. The recommended fluid intake is 50 ml/kg or 100 ml/lb per day. A 5- to 6-year-old weighing 18 kg (40 lb) should drink 2 L/day of fluid."
                },
                {
                    question: "In teaching the parent of a newly diagnosed 2-year-old child with pyelonephritis related to vesicoureteral reflux (VUR), the nurse should include which information?",
                    options: ["Limit fluids to reduce reflux", "Give cranberry juice twice a day", "Have siblings examined for VUR", "Surgery is indicated to reverse scarring"],
                    correct: 2,
                    rationale: "Siblings are at high risk for VUR (approximately 36% incidence). The other children should be screened for early detection and to potentially reduce scarring."
                },
                {
                    question: "What pathologic process is believed to be responsible for the development of postinfectious glomerulonephritis?",
                    options: [
                        "Infarction of renal vessels",
                        "Immune complex formation and glomerular deposition",
                        "Bacterial endotoxin deposition on and destruction of glomeruli",
                        "Embolization of glomeruli by bacteria and fibrin from endocardial vegetation"
                    ],
                    correct: 1,
                    rationale: "After a streptococcal infection, antibodies are formed, and an immune-complex reaction occurs. The immune complexes are trapped in the glomerular capillary loop."
                },
                {
                    question: "The nurse notes that a child has lost 3.6 kg (8 lb) after 4 days of hospitalization for acute glomerulonephritis. What is the most likely cause of this weight loss?",
                    options: ["Poor appetite", "Reduction of edema", "Restriction to bed rest", "Increased potassium intake"],
                    correct: 1,
                    rationale: "This amount of weight loss in this period results from improvement of renal function and mobilization of edema fluid."
                },
                {
                    question: "What measure of fluid balance status is most useful in a child with acute glomerulonephritis?",
                    options: ["Proteinuria", "Daily weight", "Specific gravity", "Intake and output"],
                    correct: 1,
                    rationale: "A record of daily weight is the most useful means to assess fluid balance and should be kept for children treated at home or in the hospital."
                },
                {
                    question: "The parent of a child hospitalized with acute glomerulonephritis asks the nurse why blood pressure readings are being taken so often. What knowledge should influence the nurse's reply?",
                    options: [
                        "The antibiotic therapy contributes to labile blood pressure values",
                        "Hypotension leading to sudden shock can develop at any time",
                        "Acute hypertension is a concern that requires monitoring",
                        "Blood pressure fluctuations indicate that the condition has become chronic"
                    ],
                    correct: 2,
                    rationale: "Blood pressure monitoring is essential to identify acute hypertension, which is treated aggressively in glomerulonephritis."
                },
                {
                    question: "What laboratory finding, in conjunction with the presenting symptoms, indicates minimal change nephrotic syndrome?",
                    options: ["Low specific gravity", "Decreased hemoglobin", "Normal platelet count", "Reduced serum albumin"],
                    correct: 3,
                    rationale: "Total serum protein concentrations are reduced, with the albumin fractions significantly reduced in minimal change nephrotic syndrome."
                },
                {
                    question: "What is the primary objective of care for the child with minimal change nephrotic syndrome (MCNS)?",
                    options: ["Reduce blood pressure", "Lower serum protein levels", "Minimize excretion of urinary protein", "Increase the ability of tissue to retain fluid"],
                    correct: 2,
                    rationale: "The objectives of therapy include reducing excretion of urinary protein, reducing fluid retention, preventing infection, and minimizing complications associated with therapy."
                },
                {
                    question: "A hospitalized child with minimal change nephrotic syndrome is receiving high doses of prednisone. What nursing goal is appropriate for this child?",
                    options: ["Stimulate appetite", "Detect evidence of edema", "Minimize risk of infection", "Promote adherence to the antibiotic regimen"],
                    correct: 2,
                    rationale: "High-dose steroid therapy has an immunosuppressant effect. These children are particularly vulnerable to infections, so minimizing infection risk is a priority."
                },
                {
                    question: "The nurse is teaching a child experiencing severe edema associated with minimal change nephrotic syndrome about his diet. The nurse should discuss what dietary need?",
                    options: ["Consuming a regular diet", "Increasing protein", "Restricting fluids", "Decreasing calories"],
                    correct: 2,
                    rationale: "During the edematous stage of active nephrosis, the child has restricted fluid and sodium intake. As edema subsides, the child is placed on a diet with increased salt and fluids."
                },
                {
                    question: "A child is admitted for minimal change nephrotic syndrome (MCNS). The nurse recognizes that the child's prognosis is related to what factor?",
                    options: ["Admission blood pressure", "Creatinine clearance", "Amount of protein in urine", "Response to steroid therapy"],
                    correct: 3,
                    rationale: "Corticosteroids are the drugs of choice for MCNS. If the child has not responded to therapy within 28 days of daily steroid administration, the likelihood of subsequent response decreases."
                },
                {
                    question: "A 12-year-old child is injured in a bicycle accident. When considering the possibility of renal trauma, the nurse should consider what factor?",
                    options: [
                        "Flank pain rarely occurs in children with renal injuries",
                        "Few nonpenetrating injuries cause renal trauma in children",
                        "Kidneys are immobile, well protected, and rarely injured in children",
                        "The amount of hematuria is not a reliable indicator of the seriousness of renal injury"
                    ],
                    correct: 3,
                    rationale: "Hematuria is consistently present with renal trauma but does not provide a reliable indicator of the seriousness of the injury."
                },
                {
                    question: "What condition is the most common cause of acute renal failure in children?",
                    options: ["Pyelonephritis", "Tubular destruction", "Severe dehydration", "Upper tract obstruction"],
                    correct: 2,
                    rationale: "The most common cause of acute renal failure in children is dehydration or other causes of poor perfusion that may respond to restoration of fluid volume."
                },
                {
                    question: "A child is admitted in acute renal failure (ARF). Therapeutic management to rapidly provoke a flow of urine includes the administration of what medication?",
                    options: ["Propranolol (Inderal)", "Calcium gluconate", "Mannitol (Osmitrol) or furosemide (Lasix) (or both)", "Sodium, chloride, and potassium"],
                    correct: 2,
                    rationale: "In ARF, if hydration is adequate, mannitol or furosemide (or both) is administered to provoke a flow of urine."
                },
                {
                    question: "What major complication is associated with a child with chronic renal failure?",
                    options: ["Hypokalemia", "Metabolic alkalosis", "Water and sodium retention", "Excessive excretion of blood urea nitrogen"],
                    correct: 2,
                    rationale: "Chronic renal failure leads to water and sodium retention, which contributes to edema and vascular congestion."
                },
                {
                    question: "What diet is most appropriate for the child with chronic renal failure (CRF)?",
                    options: ["Low in protein", "Low in vitamin D", "Low in phosphorus", "Supplemented with vitamins A, E, and K"],
                    correct: 2,
                    rationale: "Dietary phosphorus may need to be restricted by limiting protein and milk intake. Substances that bind phosphorus are given with meals to prevent its absorption."
                },
                {
                    question: "What nursing consideration is most important when caring for a child with end-stage renal disease (ESRD)?",
                    options: [
                        "Children with ESRD usually adapt well to minor inconveniences of treatment",
                        "Children with ESRD require extensive support until they outgrow the condition",
                        "Multiple stresses are placed on children with ESRD and their families until the illness is cured",
                        "Multiple stresses are placed on children with ESRD and their families because children's lives are maintained by drugs and artificial means"
                    ],
                    correct: 3,
                    rationale: "Stressors on the family are often overwhelming because of the progressive deterioration. The child progresses from renal insufficiency to uremia to dialysis and transplantation, each requiring intensive therapy and support."
                },
                {
                    question: "The nurse is caring for an adolescent who has just started dialysis. The child always seems angry, hostile, or depressed. The nurse should recognize that this is most likely related to what underlying cause?",
                    options: [
                        "Physiologic manifestations of renal disease",
                        "The fact that adolescents have few coping mechanisms",
                        "Neurologic manifestations that occur with dialysis",
                        "Resentment of the control and enforced dependence imposed by dialysis"
                    ],
                    correct: 3,
                    rationale: "Older children and adolescents need to feel in control. Dialysis forces the adolescent into a dependent relationship, which results in these behaviors."
                },
                {
                    question: "What statement is an advantage of peritoneal dialysis compared with hemodialysis?",
                    options: [
                        "Protein loss is less extensive",
                        "Dietary limitations are not necessary",
                        "It is easy to learn and safe to perform",
                        "It is needed less frequently than hemodialysis"
                    ],
                    correct: 2,
                    rationale: "Peritoneal dialysis is the preferred form for parents, infants, and children who wish to remain independent. Parents and older children can perform treatments themselves."
                },
                {
                    question: "What statement is descriptive of renal transplantation in children?",
                    options: [
                        "It is an acceptable means of treatment after age 10 years",
                        "Children can receive kidneys only from other children",
                        "It is the preferred means of renal replacement therapy in children",
                        "The decision for transplantation is difficult because a relatively normal lifestyle is not possible"
                    ],
                    correct: 2,
                    rationale: "Renal transplantation offers the opportunity for a relatively normal life and is the preferred means of renal replacement therapy in end-stage renal disease."
                },
                {
                    question: "The nurse is conducting discharge teaching with the parent of a 7-year-old child with minimal change nephrotic syndrome (MCNS). What statement by the parent indicates a correct understanding of the teaching?",
                    options: [
                        "My child needs to stay home from school for at least 1 more month",
                        "I should not add additional salt to any of my child's meals",
                        "My child will not be able to participate in contact sports while receiving corticosteroid therapy",
                        "I should measure my child's urine after each void and report the 24-hour amount to the health care provider"
                    ],
                    correct: 1,
                    rationale: "Children with MCNS can be treated at home after the initial phase with appropriate discharge instructions, including a salt restriction of no additional salt to meals."
                },
                {
                    question: "What is the narrowing of preputial opening of foreskin called?",
                    options: ["Chordee", "Phimosis", "Epispadias", "Hypospadias"],
                    correct: 1,
                    rationale: "Phimosis is the narrowing or stenosis of the preputial opening of the foreskin. Chordee is ventral curvature of the penis. Epispadias has meatal opening on dorsal surface. Hypospadias has urethral opening on ventral surface."
                },
                {
                    question: "Identification and treatment of cryptorchid testes should be done by age 2 years. What is an important consideration?",
                    options: [
                        "Medical therapy is not effective after this age",
                        "Treatment is necessary to maintain the ability to be fertile when older",
                        "The younger child can tolerate the extensive surgery needed",
                        "Sexual reassignment may be necessary if treatment is not successful"
                    ],
                    correct: 1,
                    rationale: "The longer the testis is exposed to higher body heat, the greater the likelihood of damage. To preserve fertility, surgery should be done at an early age."
                },
                {
                    question: "Congenital defects of the genitourinary tract, such as hypospadias, are usually repaired as early as possible to accomplish what?",
                    options: ["Minimize separation anxiety", "Prevent urinary complications", "Increase acceptance of hospitalization", "Promote development of normal body image"],
                    correct: 3,
                    rationale: "Promoting development of normal body image is extremely important. Surgery involving sexual organs can be upsetting to children, especially preschoolers who fear mutilation and castration."
                },
                {
                    question: "The parents of a 2-year-old boy who had a repair of exstrophy of the bladder at birth ask when they can begin toilet training their son. The nurse replies based on what knowledge?",
                    options: [
                        "Most boys in the United States can be toilet trained at age 3 years",
                        "Training can begin when he has sufficient bladder capacity",
                        "Additional surgery may be necessary to achieve continence",
                        "They should begin now because he will require additional time"
                    ],
                    correct: 2,
                    rationale: "After repair of bladder exstrophy, the child's bladder is allowed to increase capacity. Several surgical procedures may be necessary to create a urethral sphincter mechanism to aid in urination and ejaculation."
                },
                {
                    question: "An infant has been diagnosed with bladder obstruction. What do symptoms of this disorder include?",
                    options: ["Renal colic", "Strong urinary stream", "Urinary tract infections", "Posturination dribbling"],
                    correct: 3,
                    rationale: "Symptoms of bladder obstruction include poor force of urinary stream, intermittency, feelings of incomplete emptying, and posturination dribbling."
                },
                {
                    question: "The parents of a child born with ambiguous genitalia tell the nurse that family and friends are asking what caused the baby to be this way. Tests are being done to assist in gender assignment. What should the nurse's intervention include?",
                    options: [
                        "Explain the disorder so they can explain it to others",
                        "Help parents understand that this is a minor problem",
                        "Suggest that parents avoid family and friends until the gender is assigned",
                        "Encourage parents not to worry while the tests are being done"
                    ],
                    correct: 0,
                    rationale: "Explaining the disorder to parents so they can explain it to others is the most therapeutic approach while awaiting gender assignment."
                },
                {
                    question: "Parents of a newborn with ambiguous genitalia want to know how long they will have to wait to know whether they have a boy or a girl. The nurse answers the parents based on what knowledge?",
                    options: [
                        "Chromosome analysis will be complete in 7 days",
                        "A physical examination will be able to provide a definitive answer",
                        "Additional laboratory testing is necessary to assign the correct gender",
                        "Gender assignment involves collaboration between the parents and a multidisciplinary team"
                    ],
                    correct: 3,
                    rationale: "Gender assignment is a complex decision-making process involving endocrine, genetic, social, psychologic, and ethical elements. Parent participation is included."
                },
                {
                    question: "Surgery is performed on a child to correct cryptorchidism. The parents understand the reason for the surgery if they tell the nurse this was done to do what?",
                    options: ["Prevent damage to the undescended testicle", "Prevent urinary tract infections", "Prevent prostate cancer", "Prevent an inguinal hernia"],
                    correct: 0,
                    rationale: "Orchiopexy is performed to prevent damage to the undescended testicle by exposure to higher body heat, thus maintaining future fertility and decreasing malignancy risk."
                },
                {
                    question: "What is an appropriate nursing intervention for a child with minimal change nephrotic syndrome (MCNS) who has scrotal edema?",
                    options: ["Place an ice pack on the scrotal area", "Place the child in an upright sitting position", "Elevate the scrotum with a rolled washcloth", "Place a warm moist pack to the scrotal area"],
                    correct: 2,
                    rationale: "In children with MCNS, elevating edematous parts may be helpful. The scrotum can be elevated with a rolled washcloth. Ice or heat should not be used."
                },
                {
                    question: "What do the clinical manifestations of minimal change nephrotic syndrome include?",
                    options: ["Hematuria, bacteriuria, and weight gain", "Gross hematuria, albuminuria, and fever", "Hypertension, weight loss, and proteinuria", "Massive proteinuria, hypoalbuminemia, and edema"],
                    correct: 3,
                    rationale: "Massive proteinuria, hypoalbuminemia, and edema are clinical manifestations of minimal change nephrotic syndrome."
                },
                {
                    question: "For minimal change nephrotic syndrome (MCNS), prednisone is effective when what occurs?",
                    options: [
                        "Appetite increases and blood pressure is normal",
                        "Urinary tract infection is gone and edema subsides",
                        "Generalized edema subsides and blood pressure is normal",
                        "Diuresis occurs as urinary protein excretion diminishes"
                    ],
                    correct: 3,
                    rationale: "In most patients, diuresis occurs as urinary protein excretion diminishes within 7 to 21 days after initiation of steroid therapy."
                },
                {
                    question: "A nurse is evaluating the effectiveness of teaching regarding care of a child with minimal change nephrotic syndrome (MCNS) that is in remission after administration of prednisone. The nurse realizes further teaching is required if the parents state what?",
                    options: [
                        "We will keep our child away from anyone who is ill",
                        "We will be sure to administer the prednisone as ordered",
                        "We will encourage our child to eat a balanced diet, but we will watch his salt intake",
                        "We understand our child will not be able to attend school, so we will arrange for home schooling"
                    ],
                    correct: 3,
                    rationale: "The child with MCNS in remission can attend school. The child needs socialization and will be socially isolated if home schooled."
                },
                {
                    question: "A parent asks the nurse what would be the first indication that acute glomerulonephritis was improving. What would be the nurse's best response?",
                    options: ["Blood pressure will stabilize", "Your child will have more energy", "Urine will be free of protein", "Urine output will increase"],
                    correct: 3,
                    rationale: "The first sign of improvement in acute glomerulonephritis is an increase in urinary output with a corresponding decrease in body weight."
                },
                {
                    question: "A child is admitted with acute glomerulonephritis. What should the nurse expect the urinalysis during this acute phase to show?",
                    options: ["Bacteriuria and hematuria", "Hematuria and proteinuria", "Bacteriuria and increased specific gravity", "Proteinuria and decreased specific gravity"],
                    correct: 1,
                    rationale: "Urinalysis during acute phase characteristically shows hematuria, proteinuria, and increased specific gravity."
                },
                {
                    question: "A child with acute glomerulonephritis is in the playroom and experiences blurred vision and a headache. What action should the nurse take?",
                    options: [
                        "Check the urine to see if hematuria has increased",
                        "Obtain the child's blood pressure and notify the health care provider",
                        "Obtain serum electrolytes and send urinalysis to the laboratory",
                        "Reassure the child and encourage bed rest until the headache improves"
                    ],
                    correct: 1,
                    rationale: "Premonitory signs of encephalopathy are headache, dizziness, abdominal discomfort, and vomiting. The health care provider should be notified."
                },
                {
                    question: "The nurse is preparing to admit a child to the hospital with a diagnosis of acute poststreptococcal glomerulonephritis. The nurse understands that the peak age at onset for this disease is what?",
                    options: ["2 to 4 years", "5 to 7 years", "8 to 10 years", "11 to 13 years"],
                    correct: 1,
                    rationale: "The peak age at onset for acute poststreptococcal glomerulonephritis is 5 to 7 years of age."
                },
                {
                    question: "The nurse is preparing to admit a child to the hospital with a diagnosis of minimal change nephrotic syndrome. The nurse understands that the peak age at onset for this disease is what?",
                    options: ["2 to 3 years", "4 to 5 years", "6 to 7 years", "8 to 9 years"],
                    correct: 0,
                    rationale: "The peak age at onset for minimal change nephrotic syndrome is 2 to 3 years of age."
                }
            ],
            
            'matching': [
                {
                    question: "Which term is defined as 'inflammation of the upper urinary tract and kidneys'?",
                    options: ["Persistent urinary tract infection", "Cystitis", "Urethritis", "Pyelonephritis", "Urosepsis"],
                    correct: 3,
                    rationale: "Pyelonephritis is an infection of the renal pelvis and kidney parenchyma."
                },
                {
                    question: "Which term is defined as 'febrile urinary tract infection coexisting with systemic signs of bacterial illness'?",
                    options: ["Persistent urinary tract infection", "Cystitis", "Urethritis", "Pyelonephritis", "Urosepsis"],
                    correct: 4,
                    rationale: "Urosepsis is a systemic, life-threatening infection that originates from a urinary tract infection."
                },
                {
                    question: "Which term is defined as 'persistence of bacteriuria despite antibiotic treatment'?",
                    options: ["Persistent urinary tract infection", "Cystitis", "Urethritis", "Pyelonephritis", "Urosepsis"],
                    correct: 0,
                    rationale: "A persistent UTI occurs when bacteria are not fully eradicated by initial antibiotic therapy."
                },
                {
                    question: "Which term is defined as 'inflammation of the urethra'?",
                    options: ["Persistent urinary tract infection", "Cystitis", "Urethritis", "Pyelonephritis", "Urosepsis"],
                    correct: 2,
                    rationale: "Urethritis is inflammation of the urethra, often due to infection."
                },
                {
                    question: "Which term is defined as 'inflammation of the bladder'?",
                    options: ["Persistent urinary tract infection", "Cystitis", "Urethritis", "Pyelonephritis", "Urosepsis"],
                    correct: 1,
                    rationale: "Cystitis is inflammation of the urinary bladder, most commonly from bacterial infection."
                }
            ],
            
            'med-math': [
                {
                    question: "A health care provider prescribes furosemide (Lasix), 10 mg IV now, for a child with acute glomerulonephritis. The medication label states: Furosemide (Lasix) 20 mg/2 mL. How many milliliters will the nurse prepare to administer the dose?",
                    options: ["0.5 mL", "1 mL", "2 mL", "4 mL"],
                    correct: 1,
                    rationale: "Volume = (Desired dose √∑ Dose on hand) √ó Volume on hand = (10 mg √∑ 20 mg) √ó 2 mL = 1 mL"
                },
                {
                    question: "Calculate the 24-hour maintenance fluid requirement for a child weighing 25 kg.",
                    options: ["1400 mL/day", "1500 mL/day", "1600 mL/day", "1700 mL/day"],
                    correct: 2,
                    rationale: "First 10 kg: 100 mL/kg/day √ó 10 kg = 1000 mL. Second 10 kg: 50 mL/kg/day √ó 10 kg = 500 mL. Remaining 5 kg: 20 mL/kg/day √ó 5 kg = 100 mL. Total: 1000 + 500 + 100 = 1600 mL/day."
                },
                {
                    question: "Calculate the 24-hour maintenance fluid requirement for a child weighing 6 kg.",
                    options: ["400 mL/day", "500 mL/day", "600 mL/day", "700 mL/day"],
                    correct: 2,
                    rationale: "First 10 kg: 100 mL/kg/day √ó 6 kg = 600 mL/day."
                },
                {
                    question: "Calculate the 24-hour maintenance fluid requirement for a child weighing 12 kg.",
                    options: ["900 mL/day", "1000 mL/day", "1100 mL/day", "1200 mL/day"],
                    correct: 2,
                    rationale: "First 10 kg: 100 mL/kg/day √ó 10 kg = 1000 mL. Next 2 kg: 50 mL/kg/day √ó 2 kg = 100 mL. Total: 1000 + 100 = 1100 mL/day."
                },
                {
                    question: "A health care provider prescribes Osmitrol (mannitol), 0.5 g/kg IV now, for a child with minimal change nephrotic syndrome. The child weighs 10 kg. The medication label states: Osmitrol (mannitol) 20 g/100 mL. How many milliliters will the nurse prepare to administer the dose?",
                    options: ["20 mL", "25 mL", "50 mL", "100 mL"],
                    correct: 1,
                    rationale: "Dose = 0.5 g/kg √ó 10 kg = 5 g. Volume = (5 g √∑ 20 g) √ó 100 mL = 25 mL."
                }
            ],
            
            'all': []
        };

        // Combine all questions for the 'all' section
        sections['all'] = [
            ...sections['multiple-choice'].map(q => ({...q, section: 'multiple-choice'})),
            ...sections['matching'].map(q => ({...q, section: 'matching', isMatching: true})),
            ...sections['med-math'].map(q => ({...q, section: 'med-math', isMedMath: true}))
        ];

        let currentSection = 'multiple-choice';
        let currentQuestion = 0;
        let selectedOption = null;
        let selectedOptions = [];
        let isSubmitted = false;
        let answers = {
            'multiple-choice': Array(sections['multiple-choice'].length).fill(null),
            'matching': Array(sections['matching'].length).fill(null),
            'med-math': Array(sections['med-math'].length).fill(null),
            'all': Array(sections['all'].length).fill(null)
        };

        function setSection(section) {
            currentSection = section;
            currentQuestion = 0;
            selectedOption = null;
            selectedOptions = [];
            isSubmitted = false;
            
            document.querySelectorAll('.section-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
            
            loadQuestion();
        }

        function isMatchingSection() {
            if (currentSection === 'all') {
                const questionData = getCurrentQuestionData();
                return questionData?.isMatching || questionData?.section === 'matching';
            }
            return currentSection === 'matching';
        }

        function getCurrentQuestionData() {
            if (currentSection === 'all') {
                return sections['all'][currentQuestion] || null;
            } else {
                return sections[currentSection][currentQuestion];
            }
        }

        function loadQuestion() {
            const questionData = getCurrentQuestionData();
            
            if (!questionData) return;
            
            const isMatching = isMatchingSection();
            
            // Update UI elements visibility
            document.getElementById('matchingContainer').style.display = isMatching ? 'flex' : 'none';
            document.getElementById('options').style.display = isMatching ? 'none' : 'flex';
            document.getElementById('multipleSelectIndicator').style.display = 'none';
            document.getElementById('multipleSelectInstructions').style.display = 'none';
            document.getElementById('cancelBtn').classList.remove('show');
            document.getElementById('submitBtn').style.display = 'none';
            document.getElementById('questionNumber').textContent = currentQuestion + 1;
            
            let totalQuestions = getTotalQuestions();
            
            const progress = ((currentQuestion + 1) / totalQuestions) * 100;
            document.getElementById('progressBar').style.width = `${progress}%`;
            document.getElementById('counter').textContent = `${currentQuestion + 1}/${totalQuestions}`;
            
            if (isMatching) {
                document.getElementById('matchingQuestion').textContent = questionData.question;
                loadMatchingOptions(questionData);
            } else {
                document.getElementById('question').textContent = questionData.question;
                loadOptions(questionData);
            }
            
            document.getElementById('feedback').style.display = 'none';
            document.getElementById('rationale').classList.remove('show');
            
            document.getElementById('prevBtn').disabled = currentQuestion === 0;
            const isLastQuestion = currentQuestion >= totalQuestions - 1;
            document.getElementById('nextBtn').textContent = isLastQuestion ? 'Finish ‚û°Ô∏è' : 'Next ‚û°Ô∏è';
            document.getElementById('nextBtn').disabled = true;
            
            // Load saved answer state
            const storedAnswer = answers[currentSection][currentQuestion];
            if (storedAnswer !== null && storedAnswer !== undefined) {
                if (isMatching) {
                    selectedOption = storedAnswer;
                    highlightMatchingOption(storedAnswer, questionData);
                    showFeedback(storedAnswer, questionData);
                    document.getElementById('nextBtn').disabled = false;
                    document.getElementById('cancelBtn').classList.add('show');
                } else {
                    selectedOption = storedAnswer;
                    highlightSelectedOption(storedAnswer, questionData);
                    showFeedback(storedAnswer, questionData);
                    document.getElementById('nextBtn').disabled = false;
                    document.getElementById('cancelBtn').classList.add('show');
                }
            } else {
                selectedOption = null;
                selectedOptions = [];
                isSubmitted = false;
            }
        }

        function loadMatchingOptions(questionData) {
            const matchingOptions = document.getElementById('matchingOptions');
            matchingOptions.innerHTML = '';
            
            if (questionData.options) {
                questionData.options.forEach((option, index) => {
                    const optionDiv = document.createElement('div');
                    optionDiv.className = 'matching-option';
                    optionDiv.textContent = `${String.fromCharCode(65 + index)}) ${option}`;
                    optionDiv.onclick = () => selectMatchingOption(index, questionData);
                    matchingOptions.appendChild(optionDiv);
                });
                
                const storedAnswer = answers[currentSection][currentQuestion];
                if (storedAnswer !== null && storedAnswer !== undefined) {
                    highlightMatchingOption(storedAnswer, questionData);
                }
            }
        }

        function loadOptions(questionData) {
            const optionsContainer = document.getElementById('options');
            optionsContainer.innerHTML = '';
            
            if (questionData.options && questionData.options.length > 0) {
                questionData.options.forEach((option, index) => {
                    const optionElement = document.createElement('div');
                    optionElement.className = 'option';
                    optionElement.innerHTML = `
                        <div class="option-letter">${String.fromCharCode(65 + index)}</div>
                        <div class="option-text">${option}</div>
                    `;
                    optionElement.onclick = () => selectOption(index, questionData);
                    optionsContainer.appendChild(optionElement);
                });
            } else {
                const optionElement = document.createElement('div');
                optionElement.className = 'option';
                optionElement.innerHTML = `
                    <div class="option-letter">A</div>
                    <div class="option-text">No options available for this question</div>
                `;
                optionsContainer.appendChild(optionElement);
            }
        }

        function selectOption(index, questionData) {
            if (!questionData) questionData = getCurrentQuestionData();
            
            answers[currentSection][currentQuestion] = index;
            selectedOption = index;
            
            highlightSelectedOption(index, questionData);
            showFeedback(index, questionData);
            document.getElementById('nextBtn').disabled = false;
            document.getElementById('cancelBtn').classList.add('show');
        }

        function selectMatchingOption(index, questionData) {
            if (!questionData) questionData = getCurrentQuestionData();
            
            answers[currentSection][currentQuestion] = index;
            selectedOption = index;
            
            document.querySelectorAll('.matching-option').forEach(option => {
                option.classList.remove('selected', 'correct', 'incorrect');
            });
            
            const selectedOptionElement = document.querySelectorAll('.matching-option')[index];
            selectedOptionElement.classList.add('selected');
            
            if (index === questionData.correct) {
                selectedOptionElement.classList.add('correct');
            } else {
                selectedOptionElement.classList.add('incorrect');
                document.querySelectorAll('.matching-option')[questionData.correct].classList.add('correct');
            }
            
            showFeedback(index, questionData);
            document.getElementById('nextBtn').disabled = false;
            document.getElementById('cancelBtn').classList.add('show');
        }

        function highlightMatchingOption(index, questionData) {
            if (!questionData) questionData = getCurrentQuestionData();
            
            const options = document.querySelectorAll('.matching-option');
            
            options.forEach((option, i) => {
                option.classList.remove('selected', 'correct', 'incorrect');
                if (i === index) {
                    option.classList.add('selected');
                    if (i === questionData.correct) {
                        option.classList.add('correct');
                    } else {
                        option.classList.add('incorrect');
                        options[questionData.correct].classList.add('correct');
                    }
                }
            });
        }

        function highlightSelectedOption(index, questionData) {
            if (!questionData) questionData = getCurrentQuestionData();
            
            const options = document.querySelectorAll('.option');
            
            options.forEach((option, i) => {
                option.classList.remove('selected', 'correct', 'incorrect');
                
                if (i === index) {
                    if (i === questionData.correct) {
                        option.classList.add('correct');
                    } else {
                        option.classList.add('incorrect');
                        if (questionData.correct !== undefined) {
                            options[questionData.correct].classList.add('correct');
                        }
                    }
                }
            });
        }

        function showFeedback(index, questionData) {
            if (!questionData) questionData = getCurrentQuestionData();
            
            const feedback = document.getElementById('feedback');
            const feedbackIcon = document.getElementById('feedbackIcon');
            const feedbackText = document.getElementById('feedbackText');
            const rationale = document.getElementById('rationale');
            const rationaleText = document.getElementById('rationaleText');
            
            if (index === questionData.correct) {
                feedback.className = 'feedback correct';
                feedbackIcon.textContent = '‚úÖ';
                feedbackText.textContent = 'Correct! Well done.';
            } else {
                feedback.className = 'feedback incorrect';
                feedbackIcon.textContent = '‚ùå';
                const correctLetter = String.fromCharCode(65 + questionData.correct);
                feedbackText.textContent = `Incorrect. Correct: ${correctLetter}`;
            }
            
            feedback.style.display = 'flex';
            rationaleText.textContent = questionData.rationale;
            rationale.classList.add('show');
        }

        function cancelSelection() {
            const questionData = getCurrentQuestionData();
            
            if (isMatchingSection()) {
                answers[currentSection][currentQuestion] = null;
                selectedOption = null;
                
                document.querySelectorAll('.matching-option').forEach(option => {
                    option.classList.remove('selected', 'correct', 'incorrect');
                });
                
                document.getElementById('feedback').style.display = 'none';
                document.getElementById('rationale').classList.remove('show');
                document.getElementById('nextBtn').disabled = true;
                document.getElementById('cancelBtn').classList.remove('show');
            } else {
                answers[currentSection][currentQuestion] = null;
                selectedOption = null;
                
                const options = document.querySelectorAll('.option');
                options.forEach(option => {
                    option.classList.remove('selected', 'correct', 'incorrect');
                });
                
                document.getElementById('feedback').style.display = 'none';
                document.getElementById('rationale').classList.remove('show');
                document.getElementById('nextBtn').disabled = true;
                document.getElementById('cancelBtn').classList.remove('show');
            }
        }

        function nextCard() {
            const totalQuestions = getTotalQuestions();
            
            if (currentQuestion < totalQuestions - 1) {
                currentQuestion++;
                selectedOption = null;
                selectedOptions = [];
                isSubmitted = false;
                loadQuestion();
            } else {
                let correctCount = 0;
                let totalAnswered = 0;
                
                Object.keys(answers).forEach(section => {
                    answers[section].forEach((answer, index) => {
                        if (answer !== null && answer !== undefined) {
                            totalAnswered++;
                            const questionData = getQuestionData(section, index);
                            
                            if (questionData?.isMatching || questionData?.section === 'matching') {
                                if (answer === questionData.correct) correctCount++;
                            } else if (questionData?.isMedMath || questionData?.section === 'med-math') {
                                if (answer === questionData.correct) correctCount++;
                            } else {
                                if (answer === questionData?.correct) correctCount++;
                            }
                        }
                    });
                });
                
                alert(`Quiz completed!\n\nAnswered: ${totalAnswered}\nCorrect: ${correctCount}\n\nClick OK to restart.`);
                
                currentSection = 'multiple-choice';
                currentQuestion = 0;
                selectedOption = null;
                selectedOptions = [];
                isSubmitted = false;
                answers = {
                    'multiple-choice': Array(sections['multiple-choice'].length).fill(null),
                    'matching': Array(sections['matching'].length).fill(null),
                    'med-math': Array(sections['med-math'].length).fill(null),
                    'all': Array(sections['all'].length).fill(null)
                };
                
                setSection('multiple-choice');
            }
        }

        function previousCard() {
            if (currentQuestion > 0) {
                currentQuestion--;
                const storedAnswer = answers[currentSection][currentQuestion];
                
                if (isMatchingSection()) {
                    selectedOption = storedAnswer;
                } else {
                    selectedOption = storedAnswer;
                }
                
                loadQuestion();
            }
        }

        function getTotalQuestions() {
            if (currentSection === 'all') {
                return sections['all'].length;
            } else {
                return sections[currentSection].length;
            }
        }

        function getQuestionData(section, index) {
            if (section === 'all') {
                return sections['all'][index];
            } else {
                return sections[section][index];
            }
        }

        // Initialize
        setSection('multiple-choice');
        
        // Keyboard shortcuts
        document.addEventListener('keydown', function(event) {
            if (event.key >= '1' && event.key <= '5') {
                const index = parseInt(event.key) - 1;
                const questionData = getCurrentQuestionData();
                if (isMatchingSection()) {
                    selectMatchingOption(index, questionData);
                } else {
                    selectOption(index, questionData);
                }
            } else if (event.key >= 'a' && event.key <= 'e') {
                const index = event.key.charCodeAt(0) - 97;
                const questionData = getCurrentQuestionData();
                if (isMatchingSection()) {
                    selectMatchingOption(index, questionData);
                } else {
                    selectOption(index, questionData);
                }
            } else if (event.key === 'ArrowLeft') {
                if (!document.getElementById('prevBtn').disabled) {
                    previousCard();
                }
            } else if (event.key === 'ArrowRight') {
                if (!document.getElementById('nextBtn').disabled) {
                    nextCard();
                }
            } else if (event.key === ' ' || event.key === 'Spacebar') {
                if (!document.getElementById('nextBtn').disabled) {
                    nextCard();
                }
            } else if (event.key === 'Escape') {
                cancelSelection();
            }
        });
    </script>
</body>
</html>
